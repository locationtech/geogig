<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, maximum-scale=1">
  
  <title>Web API: Transactions &mdash; GeoGig 1.2.0 User Manual</title>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,800italic,300,700,600,800,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Cantarell:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="../_static/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../_static/print.css" type="text/css" media="print" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
   <link rel="stylesheet" href="../_static/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/offcanvas.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.2.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
      <link rel="index" title="Index" href="../genindex.html" />
      <link rel="search" title="Search" href="../search.html" />
      <link rel="top" title="GeoGig 1.2.0 User Manual" href="../index.html" />
      <link rel="up" title="Other ways to interact with GeoGig" href="index.html" />
      <link rel="next" title="Web API: Commands" href="web-api-commands.html" />
      <link rel="prev" title="Web API: Overview" href="web-api-overview.html" />
</head>
<body class="interaction/web-api-transactions">
    <div id="blacktop"></div>
    <header id="masthead">
      <div class="navbar">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://geogig.org"><h1>GeoGig</h1></a>
          </div>
          <div class="navbar-collapse collapse navbar-right">
            <ul class="nav navbar-nav">
              <li><a href="http://geogig.org/#install">Get Started</a></li>
              <li><a href="http://geogig.org/docs/index.html">Documentation</a></li>
              <li><a href="https://github.com/locationtech/geogig">On Github</a></li>
            </ul>
          </div><!--/.navbar-collapse -->
        </div>
      </div>
    </header>

    <section class="subheading hidden-xs">
      <div class="container">
        <div class="row">
          <div class="col-md-8">
            <p class="byline">A Tool for Geospatial Data Management</p>
          </div>
        </div>
      </div>
    </section>
    <a name="top"></a>

 <div id="main">
    <div class="wrap selfclear">
      <div id="content">
      <div class="container">
        <div class="row row-offcanvas row-offcanvas-right">
          <div class="col-md-8">
            <div class="row pull-right">
             <div class="visible-sm visible-xs" id="menu-btn">
                <button class="btn btn-blue btn-sm"type="button" data-toggle="offcanvas">
                  <span class="btn-text active">Menu &rarr;</span>
                  <span class="btn-back">&larr; Back</span>
                </button>
              </div>
            </div>
<ul id="breadcrumbs">
  
  <li><a href="../index.html">GeoGig 1.2.0 User Manual</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Other ways to interact with GeoGig</a> &raquo;</li>
  <li>Web API: Transactions</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../genindex.html" title="General Index"
       accesskey="I">index</a></li>
  <li>
    <a href="web-api-commands.html" title="Web API: Commands"
       accesskey="N">next</a>|</li>
  <li>
    <a href="web-api-overview.html" title="Web API: Overview"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="web-api-transactions">
<h1>Web API: Transactions<a class="headerlink" href="#web-api-transactions" title="Permalink to this headline">¶</a></h1>
<p>Many web API commands have transaction support to allow multiple users to change the state of the repository without compromising stability.  This works by beginning a transaction, which will generate a unique transaction ID.  This ID can then be passed to many web API commands so that all work done by that command will affect only that transaction.  After you are done with everything on the transaction you can then end that transaction to merge those changes into the base repository. Some commands require a transaction to preserve the stability of the repository. Those that require it will have <code class="docutils literal"><span class="pre">(-T)</span></code> next to the name of the command in this doc. To perform a command on a transaction, simply supply the transaction ID via the <code class="docutils literal"><span class="pre">transactionId</span></code> parameter.</p>
<div class="section" id="begintransaction">
<h2>BeginTransaction<a class="headerlink" href="#begintransaction" title="Permalink to this headline">¶</a></h2>
<p>Begins a new transaction, generating a new transaction ID.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">repos</span><span class="o">/&lt;</span><span class="n">repo</span><span class="o">&gt;/</span><span class="n">beginTransaction</span>
</pre></div>
</div>
<div class="section" id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p><strong>Begin a new transaction</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ curl -v &quot;http://localhost:8182/repos/repo1/beginTransaction&quot; | xmllint --format -
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;response&gt;
    &lt;success&gt;true&lt;/success&gt;
    &lt;Transaction&gt;
        &lt;ID&gt;e6062d14-5b31-46b5-8e83-9d02fdc45504&lt;/ID&gt;
    &lt;/Transaction&gt;
&lt;/response&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="endtransaction-t">
<h2>EndTransaction (-T)<a class="headerlink" href="#endtransaction-t" title="Permalink to this headline">¶</a></h2>
<p>Ends the transaction that belongs to the ID provided in the request.   This operation may return merge conflicts that must be resolved before the merge can be completed (See <a class="reference internal" href="web-api-conflict-resolution.html#conflict-resolution"><span class="std std-ref">Web API: Conflict Resolution</span></a>).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>GET /repos/&lt;repo&gt;/endTransaction?transactionId=&lt;transactionId&gt;[&amp;cancel=&lt;true|false&gt;]
</pre></div>
</div>
<div class="section" id="id1">
<h3>Parameters<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p><strong>cancel:</strong>
Optional.  If true, the changes made on the transaction will be discarded.  If not defined, the transaction’s changes will be merged into the base repository.</p>
</div>
<div class="section" id="id2">
<h3>Examples<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p><strong>End a transaction</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ curl -v &quot;http://localhost:8182/repos/repo1/endTransaction?transactionId=e6062d14-5b31-46b5-8e83-9d02fdc45504&quot; | xmllint --format -
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;response&gt;
    &lt;success&gt;true&lt;/success&gt;
    &lt;Transaction&gt;
        &lt;ID&gt;e6062d14-5b31-46b5-8e83-9d02fdc45504&lt;/ID&gt;
    &lt;/Transaction&gt;
&lt;/response&gt;
</pre></div>
</div>
<p><strong>End a transaction with conflicts</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ curl -v &quot;http://localhost:8182/repos/repo1/endTransaction?transactionId=4c3af4a5-e537-40eb-b624-02d62e1d9580&quot; | xmllint --format -
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/xml
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;response&gt;
  &lt;success&gt;true&lt;/success&gt;
  &lt;Merge&gt;
    &lt;ours&gt;fe2b96c6f4b48dfe856c30cc97632025a38bd61c&lt;/ours&gt;
    &lt;theirs&gt;ee2d5fede514b8430d3fba6939c88b8d7194dfa4&lt;/theirs&gt;
    &lt;ancestor&gt;fb4a412f36dbbadac3b0edcff947addfe02a6970&lt;/ancestor&gt;
    &lt;conflicts&gt;1&lt;/conflicts&gt;
    &lt;Feature&gt;
      &lt;change&gt;CONFLICT&lt;/change&gt;
      &lt;id&gt;points/b38e3abb1&lt;/id&gt;
      &lt;ourvalue&gt;3b1f12f33d00676533d113cdee5494b82f383e46&lt;/ourvalue&gt;
      &lt;theirvalue&gt;34e78ca7ff6b3c37a4ec43558865e4437c19d5be&lt;/theirvalue&gt;
      &lt;geometry&gt;POINT (-101.67906976744186 -19.339534883721)&lt;/geometry&gt;
      &lt;crs&gt;EPSG:4326&lt;/crs&gt;
    &lt;/Feature&gt;
  &lt;/Merge&gt;
&lt;/response&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If there were conflicting changes on the base repository when ending a transaction, this endpoint will return those conflicts.  They must be resolved before attempting to end the transaction again.</p>
</div>
<p><strong>Cancel a transaction</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ curl -v &quot;http://localhost:8182/repos/repo1/endTransaction?transactionId=e6062d14-5b31-46b5-8e83-9d02fdc45504&amp;cancel=true&quot; | xmllint --format -
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;response&gt;
    &lt;success&gt;true&lt;/success&gt;
    &lt;Transaction&gt;
        &lt;ID&gt;e6062d14-5b31-46b5-8e83-9d02fdc45504&lt;/ID&gt;
    &lt;/Transaction&gt;
&lt;/response&gt;
</pre></div>
</div>
</div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="web-api-overview.html" title="previous chapter">Web API: Overview</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="web-api-commands.html" title="next chapter">Web API: Commands</a></div>
      </div>
      <p class="centered-text"><a href="#top"><img src="../_static/arrow_up.png" alt="back to top"/></a></p>
      </div><!-- /#content> -->
  <div id="sidebar" class="sidebar-offcanvas contrast col-sm-4 sidebar-offcanvas" id="sidebar" role="navigation">

    <div>
         <form id="quick-search" action="search.html" method="get" style="width: 100%;">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
          </fieldset>
        </form>


        <div class="btn-group-vertical" id="docs_toc">
          <a class="btn btn-default" href="/docs/">User Manual</a>
          <a class="btn btn-default" href="/technical/">Technical Manual</a>
          <a class="btn btn-default" href="/manpages/">Man Pages</a>
          <a class="btn btn-default" href="/workshop/">Workshop</a>
          <a class="btn btn-default" href="/upgrade/">Upgrading</a>
      </div>
      <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Web API: Transactions</a><ul>
<li><a class="reference internal" href="#begintransaction">BeginTransaction</a><ul>
<li><a class="reference internal" href="#parameters">Parameters</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#endtransaction-t">EndTransaction (-T)</a><ul>
<li><a class="reference internal" href="#id1">Parameters</a></li>
<li><a class="reference internal" href="#id2">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section continue_reading">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="web-api-overview.html" title="previous chapter">Web API: Overview</a></li>
            <li>Next: <a href="web-api-commands.html" title="next chapter">Web API: Commands</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../_sources/interaction/web-api-transactions.rst.txt">Show Source</a></li>
        </ul>
        </div>
        <div class="section">
          <h3>License</h3>
          <p>GeoGig is published using the <a href="https://github.com/locationtech/geogig/blob/master/LICENSE.txt">Eclipse Distribution License</a> (EDL). This is an open source initiative approved BSD-3 Clause license.</p>
          
          <p>This documentation is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. Page template includes work by the JQuery Foundation (<a href="https://github.com/jquery/jquery/blob/master/LICENSE.txt">MIT License</a>).</p>
        </div>

  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div>
</div>

</div><!-- /#main -->
    <footer>
      <div class="container">
        <div class="row">
          <div class=""><p class="repo-owner"><a href="https://github.com/locationtech/geogig">GeoGig</a> available on LocationTech. Website maintained by <a href="https://github.com/boundlessgeo"><img src="../_static/Boundless_Logo.png" alt="Boundless"></a></p></div>
        </div>
      </div>
    </footer>


  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/jquery-migrate-min.js"></script>
  <script type="text/javascript" src="../_static/bootstrap.min.js" ></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/searchtools.js"></script>
  <script type="text/javascript" src="../searchindex.js"></script>
  <script>
      $(document).ready(function() {

      $('[data-toggle=offcanvas]').click(function(e) {
        e.stopPropagation();
        $('.row-offcanvas').toggleClass('active');
        $('.btn-back').toggleClass('active');
        $('.btn-text').toggleClass('active');
      });
      $('.list-group-item').click(function(e) {
        e.stopPropagation();
        $('.row-offcanvas').toggleClass('active');
        $('.btn-back').toggleClass('active');
        $('.btn-text').toggleClass('active');
      });
    });
  </script>
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3879903-19']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
  </script>
  </body>
</html>
